// Массивы для симптомов, вопросов, диагнозов и рекомендаций
const симптомы = [
    "Простуда и грипп у детей",
    "Кашель у детей",
    "Диарея у детей",
    "Запоры у младенцев и детей",
    "Высокая температура у младенцев и детей",
    "Сыпь у младенцев и детей",
    "Проблемы с ушами у детей"
];

const que = [
    [
        "Есть ли у вашего ребенка насморк или заложенность носа?",
        "Часто ли ваш ребенок кашляет, особенно по ночам?",
        "Есть ли у вашего ребенка температура?",
        "Какой цвет у слизи из носа?",
        "Есть ли у ребенка болевые ощущения в горле?"
    ],
    [
        "Как долго ваш ребенок кашляет?",
        "У вашего ребенка сухой кашель или с отхаркиванием?",
        "Есть ли у вашего ребенка температура?",
        "Были ли у вашего ребенка проблемы с дыханием?",
        "Используете ли вы какие-либо средства от кашля для ребенка?"
    ],
    [
        "Как долго у вашего ребенка диарея?",
        "Сколько раз в день ваш ребенок ходит в туалет?",
        "Содержит ли стул кровь или слизь?",
        "Есть ли у ребенка высокая температура?",
        "Был ли контакт с кем-либо, у кого есть подобные симптомы?"
    ],
    [
        "Как долго ваш ребенок страдает от запоров?",
        "Сколько раз в неделю ваш ребенок ходит в туалет?",
        "Есть ли у вашего ребенка боли в животе?",
        "Ваш ребенок жалуется на дискомфорт при дефекации?",
        "Соблюдает ли ребенок диету с достаточным количеством клетчатки?"
    ],
    [
        "Какова температура вашего ребенка?",
        "Длительность высокой температуры?",
        "Есть ли у вашего ребенка другие симптомы, такие как кашель или сыпь?",
        "Даете ли вы ребенку жаропонижающее?",
        "Наблюдаете ли вы у ребенка вялость или апатию?"
    ],
    [
        "Как выглядит сыпь (пятнистая, пузырьковая и т. д.)?",
        "Когда началась сыпь?",
        "Есть ли у ребенка зуд?",
        "Сыпь локализована или распространилась по всему телу?",
        "Изменяется ли цвет или размер сыпи?"
    ],
    [
        "Как долго ваш ребенок жалуется на боль в ушах?",
        "Были ли у ребенка недавно простудные заболевания?",
        "Есть ли у вашего ребенка выделения из уха?",
        "Ваш ребенок жалуется на потерю слуха?",
        "Замечали ли вы отек или покраснение вокруг уха?"
    ]
];

const causes = [
    [
        ["Простуда", "Отдых, обильное питье, теплые компрессы. Рекомендуется парацетамол для снижения температуры.", "Парацетамол, ибупрофен для снижения температуры, капли для носа."],
        ["Грипп", "Отдых, изоляция, обильное питье. При необходимости - жаропонижающие средства.", "Парацетамол, ибупрофен. Противовирусные средства по назначению врача."],
        ["Аллергический ринит", "Избегание аллергенов, проветривание помещения. Консультация с аллергологом.", "Антигистаминные препараты, спрей для носа."],
        ["Синусит", "Промывание носа солевым раствором, теплые компрессы. Консультация с врачом.", "Антибиотики по назначению врача, капли для носа."]
    ],
    [
        ["Бронхит", "Жаропонижающие средства, ингаляции с физраствором, при необходимости - противокашлевые средства.", "Бронхолитики, ингаляторы, противокашлевые сиропы."],
        ["Пневмония", "Немедленная консультация врача, покой, обильное питье.", "Антибиотики по назначению врача, жаропонижающие средства."],
        ["Коклюш", "Консультация с врачом, отдых, увлажнение воздуха.", "Антибиотики по назначению врача, противокашлевые сиропы."],
        ["Аллергический кашель", "Избегание аллергенов, проветривание помещения, консультация с аллергологом.", "Антигистаминные препараты."]
    ],
    [
        ["Инфекционная диарея", "Обильное питье, легкая диета, консультация с врачом при длительных симптомах.", "Регидратационные растворы, пробиотики."],
        ["Ротавирусная инфекция", "Покой, обильное питье, легкая диета, консультация врача при высокой температуре.", "Регидратационные растворы, жаропонижающие средства."],
        ["Пищевая непереносимость", "Избегание продуктов, вызывающих симптомы, консультация с педиатром.", "Коррекция диеты."],
        ["Аллергическая реакция", "Избегание аллергенов, антигистаминные средства, консультация с врачом.", "Антигистаминные препараты."]
    ],
    [
        ["Запор", "Увлажнение, увеличение потребления жидкости, консультация с педиатром.", "Слабительные препараты по назначению врача, увеличение потребления клетчатки."],
        ["Синдром раздраженного кишечника", "Диета с высоким содержанием клетчатки, покой, консультация с врачом.", "Слабительные препараты по назначению врача, пробиотики."],
        ["Гипотиреоз", "Консультация с врачом для дальнейшего обследования.", "Гормональная терапия по назначению врача."],
        ["Обезвоживание", "Увлажнение, увеличение потребления воды и электролитов.", "Регидратационные растворы."]
    ],
    [
        ["Лихорадка", "Обеспечьте достаточное количество жидкости, используйте жаропонижающие средства.", "Жаропонижающие средства, такие как парацетамол или ибупрофен."],
        ["Инфекционные заболевания", "Покой, обильное питье, при необходимости жаропонижающие средства, консультация с врачом.", "Антибиотики или противовирусные препараты по назначению врача."],
        ["Тепловой удар", "Переместите ребенка в прохладное место, дайте прохладные напитки, избегайте перегрева.", "Регидратационные растворы."],
        ["Аллергическая реакция", "Избегание аллергенов, антигистаминные препараты при необходимости, консультация с врачом.", "Антигистаминные средства."]
    ],
    [
        ["Аллергия", "Избегание аллергенов, антигистаминные препараты, консультация аллерголога.", "Антигистамины, наружные кремы для снятия зуда."],
        ["Диатез", "Поддержание гигиены, исключение аллергенных продуктов, консультация с педиатром.", "Увлажняющие кремы, антигистамины при необходимости."],
        ["Экзема", "Поддержание гигиены, увлажнение кожи, избегание аллергенов, консультация с врачом.", "Кортикостероидные кремы по назначению врача, антигистаминные средства."],
        ["Инфекционная сыпь", "Избегание контакта с зараженными, консультация с врачом при необходимости.", "Антибактериальные или противовирусные препараты по назначению врача."]
    ],
    [
        ["Отит", "Консультация с врачом для осмотра и назначения лечения, при необходимости антибиотики.", "Антибиотики, такие как амоксициллин (по назначению врача)."],
        ["Серная пробка", "Посещение врача для удаления серной пробки.", "Нет необходимости в медикаментах."],
        ["Воспаление евстахиевой трубы", "Ингаляции, теплые компрессы, консультация с врачом.", "Антигистаминные препараты, капли для носа."],
        ["Аллергический отит", "Избегание аллергенов, антигистаминные препараты, консультация с врачом.", "Антигистаминные препараты, спрей для носа."]
    ]
];


window.onload = function() {
    const a1 = document.getElementById('Que');
    const a2 = document.getElementById('Cau');
    const a3 = document.getElementById('btnCau');
    const select = document.getElementById("Symptomps");

    // Отображаем или скрываем блоки в зависимости от ширины экрана
    handleScreenWidth(a1, a2, a3);
    
    // Заполняем выпадающий список симптомов
    симптомы.forEach((симптом, i) => {
        const option = document.createElement('option');
        option.text = симптом;
        option.value = i;
        select.add(option);
    });
    selectQue(0);
};

// Функция для выбора вопросов
function selectQue(params) {
    const listQuestion = document.getElementById('Questions');
    const possibleQue = document.getElementById('possibleQue');
    const Question = que[params];
    
    listQuestion.innerHTML = "";
    possibleQue.innerHTML = "";
    
    Question.forEach((question, i) => {
        const listItem = document.createElement('li');
        listItem.className = "px-6 py-2 border border-gray-200 w-full rounded m-1";
        listItem.innerHTML = `
            <p class="font-medium">${question}</p>
            <div class="form-check">
                <input class="form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                       type="radio" name="${i}" value="yes" onclick="funPossibleCause(${i})">
                <label class="form-check-label inline-block text-gray-800" for="flexRadioDefault1">Да</label>
            </div>
            <div class="form-check">
                <input class="form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-blue-600 checked:border-blue-600 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer" 
                       type="radio" name="${i}" value="no" onclick="funPossibleCauseNo(${i})">
                <label class="form-check-label inline-block text-gray-800" for="flexRadioDefault2">Нет</label>
            </div>`;
        listQuestion.appendChild(listItem);
    });
}

// Функция для возможной причины при ответе "да"
function funPossibleCause(questionIndex) {
    const possibleQue = document.getElementById('possibleQue');
    const selectedSymptomIndex = document.getElementById('Symptomps').selectedIndex;
    const Causes = causes[selectedSymptomIndex][questionIndex];

    // Заполняем и показываем блок возможных причин
    possibleQue.innerHTML = `
        <li class="px-6 py-2 border border-gray-200 w-full rounded m-1">
            <h3 class="font-medium text-red-500">Диагноз</h3>
            <p>${Causes[0]}</p>
            <h3 class="font-medium text-green-500">Рекомендация</h3>
            <p>${Causes[1]}</p>
            <h3 class="font-medium text-blue-500">Рекомендации по лекарствам</h3>
            <p>${Causes[2]}</p>
        </li>`;
    possibleQue.style.display = "block";  // Отображаем блок с результатами, если он был скрыт

    handleScreenWidth();
}


// Функция при ответе "нет" для очистки возможной причины
// Функция при ответе "нет" для очистки и скрытия возможной причины
function funPossibleCauseNo() {
    const possibleQue = document.getElementById('possibleQue');

    // Очищаем содержимое и скрываем блок
    possibleQue.innerHTML = "";
    possibleQue.style.display = "none";
}


// Обработка отображения для мобильного и десктопа
function handleScreenWidth(a1, a2, a3) {
    if (a1 && a1.style) {
        a1.style.display = "block";
    }
    if (window.innerWidth < 650) {
        if (a2 && a2.style) {
            a2.style.display = "none";
        }
        if (a3 && a3.style) {
            a3.style.display = "none";
        }
    } else {
        if (a2 && a2.style) {
            a2.style.display = "block";
        }
        if (a3 && a3.style) {
            a3.style.display = "none";
        }
    }
}


// Обратный переход к вопросам
function backToQue() {
    handleScreenWidth();
}

// Показать результат по выбору симптома
function showResult() {
    const selectSymptom = document.getElementById('Symptomps');
    selectQue(selectSymptom.selectedIndex);
}
